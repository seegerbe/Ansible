---
# IIS website test

  - name: Deploy site to IIS
    hosts: all
    tasks:
      #add IIS install

      - name: Make sure windows is configure for ansible remote management
        git: repo=https://github.com/ansible/ansible/blob/devel/examples/scripts/ConfigureRemotingForAnsible.ps1

#      - name: Add oakgov directory
#        file:
#          path: 'c:\sites\oakgov\'
#          state: directory
#         owner: seegerbe@msuoc.net
#          mode: 0775

      - name: Pull html file
        git: repo=https://github.com/bambino0429/website.git

      - name: OakGov IIS site
        win_iis_website:
          name: "OakGov"
          state: started
          hostname: oakgov.local
          physical_path: 'c:\sites\oakgov'
          parameters: 'logfile.directory:c:\sites\logs'
        register: website
